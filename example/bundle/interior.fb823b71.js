var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequire5b70;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var o={id:e,exports:{}};return t[e]=o,a.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},e.parcelRequire5b70=a);var o=a("ilwiq"),r=a("RPVlj"),i=a("7lx9d"),s=a("5Rd1x"),d=a("4CEV9"),l=a("cVdfP"),c=a("891vQ"),m=a("kp7Te"),u=a("jiuw3");let p,w,h,g,b,f,v,x,y,P,C;const F={environmentIntensity:0,environmentRotation:0,emissiveIntensity:35,bounces:20,samplesPerFrame:1,resolutionScale:1/window.devicePixelRatio,filterGlossyFactor:.25,tiles:2,cameraProjection:"Perspective"};window.location.hash.includes("transmission")&&(F.material1.metalness=0,F.material1.roughness=.05,F.material1.transmission=1,F.material1.color="#ffffff",F.bounces=10);const E=window.innerWidth/window.innerHeight;function M(){const e=window.innerWidth,t=window.innerHeight,n=F.resolutionScale,a=window.devicePixelRatio;b.setSize(e*n*a,t*n*a),b.reset(),p.setSize(e,t),p.setPixelRatio(window.devicePixelRatio*n);const o=e/t;x.aspect=o,x.updateProjectionMatrix();const r=5/o;y.top=r/2,y.bottom=r/-2,y.updateProjectionMatrix()}function R(){g.materials.forEach((e=>{e.emissiveIntensity=F.emissiveIntensity})),b.reset()}function I(e){"Perspective"===e?(f===y&&x.position.copy(f.position),f=x,w.object=f):"Orthographic"===e&&(f===x&&y.position.copy(f.position),f=y,w.object=f),"Equirectangular"===e?(f=P,w.enabled=!1,h.enabled=!0,h.update()):(h.enabled=!1,w.enabled=!0,w.update()),b.camera=f,window.CAMERA=f,b.reset()}function j(){requestAnimationFrame(j),b.material.materials.updateFrom(g.materials,g.textures),b.material.filterGlossyFactor=F.filterGlossyFactor,b.material.environmentIntensity=F.environmentIntensity,b.material.environmentBlur=.35,b.material.bounces=F.bounces,f.updateMatrixWorld();for(let e=0,t=F.samplesPerFrame;e<t;e++)b.update();p.autoClear=!1,v.render(p),p.autoClear=!0,C.innerText=`Samples: ${Math.floor(b.samples)}`}E<.65&&(F.bounces=Math.min(F.bounces,10),F.resolutionScale*=.5,F.tiles=3),async function(){p=new o.WebGLRenderer({antialias:!0}),p.toneMapping=o.ACESFilmicToneMapping,p.outputEncoding=o.sRGBEncoding,document.body.appendChild(p.domElement),x=new o.PerspectiveCamera(75,E,.025,500),x.position.set(.4,.6,2.65);const e=5/E;y=new o.OrthographicCamera(-2.5,2.5,e/2,e/-2,0,100),y.position.copy(x.position),P=new d.EquirectCamera,P.position.set(-.2,.33,.08),b=new d.PathTracingRenderer(p),b.material=new d.PhysicalPathTracingMaterial,b.tiles.set(F.tiles,F.tiles),v=new r.FullScreenQuad(new o.MeshBasicMaterial({map:b.target.texture})),w=new s.OrbitControls(x,p.domElement),w.target.set(-.15,.33,-.08),x.lookAt(w.target),w.addEventListener("change",(()=>{b.reset()})),w.update(),h=new s.OrbitControls(P,p.domElement),h.target.set(-.15,.33,-.08),P.lookAt(h.target),h.addEventListener("change",(()=>{b.reset()})),h.update(),C=document.getElementById("samples");const t=new Promise((e=>{(new c.RGBELoader).load("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/equirectangular/royal_esplanade_1k.hdr",(t=>{b.material.envMapInfo.updateFrom(t),e()}))})),n=new l.PathTracingSceneWorker,a=(new i.GLTFLoader).setMeshoptDecoder(m.MeshoptDecoder).loadAsync("https://raw.githubusercontent.com/gkjohnson/3d-demo-data/main/models/pathtracing-bathroom/modernbathroom.glb").then((e=>{const t=new o.Group;t.add(e.scene);const a=new o.Box3;a.setFromObject(e.scene),t.updateMatrixWorld();const r=new o.Vector3;return a.getCenter(r),e.scene.position.addScaledVector(r,-.5),t.updateMatrixWorld(),n.generate(t)})).then((e=>{g=e;const{bvh:t,textures:a,materials:o}=e,r=t.geometry,i=b.material;i.bvh.updateFrom(t),i.normalAttribute.updateFrom(r.attributes.normal),i.tangentAttribute.updateFrom(r.attributes.tangent),i.uvAttribute.updateFrom(r.attributes.uv),i.materialIndexAttribute.updateFrom(r.attributes.materialIndex),i.textures.setTextures(p,2048,2048,a),i.materials.updateFrom(o,a),n.dispose()}));await Promise.all([a,t]),window.CONTROLS=w,document.getElementById("loading").remove(),M(),window.addEventListener("resize",M),I(F.cameraProjection);const f=new u.GUI;f.add(F,"tiles",1,4,1).onChange((e=>{b.tiles.set(e,e)})),f.add(F,"samplesPerFrame",1,10,1),f.add(F,"filterGlossyFactor",0,1).onChange((()=>{b.reset()})),f.add(F,"environmentIntensity",0,25).onChange((()=>{b.reset()})),f.add(F,"environmentRotation",0,40).onChange((e=>{b.material.environmentRotation.setFromMatrix4((new o.Matrix4).makeRotationY(e)),b.reset()})),f.add(F,"emissiveIntensity",0,150).onChange(R),f.add(F,"bounces",1,30,1).onChange((()=>{b.reset()})),f.add(F,"resolutionScale",.1,1).onChange((()=>{M()})),f.add(F,"cameraProjection",["Perspective","Orthographic","Equirectangular"]).onChange((e=>{I(e)})),R(),j()}();
//# sourceMappingURL=interior.fb823b71.js.map
